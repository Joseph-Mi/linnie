# ==============================================================================
# CM5 Peripheral Support
# ==============================================================================

# V4L2/Media subsystem
CONFIG_MEDIA_SUPPORT=y
CONFIG_MEDIA_CAMERA_SUPPORT=y
CONFIG_VIDEO_DEV=y
CONFIG_VIDEO_V4L2=y
CONFIG_VIDEO_V4L2_SUBDEV_API=y
CONFIG_MEDIA_CONTROLLER=y

# Videobuf2 (camera buffers)
CONFIG_VIDEOBUF2_CORE=y
CONFIG_VIDEOBUF2_V4L2=y
CONFIG_VIDEOBUF2_MEMOPS=y
CONFIG_VIDEOBUF2_DMA_CONTIG=y

# Raspberry Pi CSI/Camera drivers
CONFIG_VIDEO_BCM2835_UNICAM=y
CONFIG_VIDEO_IMX477=y
CONFIG_VIDEO_IMX219=y
CONFIG_VIDEO_IMX708=y
CONFIG_VIDEO_OV5647=y

# I2C support
CONFIG_I2C=y
CONFIG_I2C_CHARDEV=y
CONFIG_I2C_BCM2835=y
CONFIG_I2C_MUX=y
CONFIG_I2C_MUX_PINCTRL=y
CONFIG_I2C_MUX_PCA954x=y
CONFIG_I2C_MUX_GPIO=y

# HWMON + LM75 temperature sensors
CONFIG_HWMON=y
CONFIG_SENSORS_LM75=y

# SPI support
CONFIG_SPI=y
CONFIG_SPI_BCM2835=y
CONFIG_SPI_BCM2835AUX=y
CONFIG_SPI_SPIDEV=y

# GPIO support
CONFIG_GPIO_SYSFS=y
CONFIG_GPIO_BCM_VIRT=y

# PWM support
CONFIG_PWM=y
CONFIG_PWM_BCM2835=y

# UART/Serial
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_BCM2835AUX=y
CONFIG_SERIAL_AMBA_PL011=y
CONFIG_SERIAL_AMBA_PL011_CONSOLE=y

# PCIe
CONFIG_PCI=y
CONFIG_PCI_MSI=y
CONFIG_PCIEPORTBUS=y
CONFIG_PCIE_BRCMSTB=y

# USB
CONFIG_USB=y
CONFIG_USB_COMMON=y
CONFIG_USB_HOST=y
CONFIG_USB_XHCI_USB=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_XHCI_PLATFORM=y
CONFIG_USB_DWC2=y
# If your kernel exposes this symbol, enable host mode explicitly.
CONFIG_USB_DWC2_HOST=y
CONFIG_USB_DWCOTG=y
CONFIG_USB_STORAGE=y

CONFIG_USB_NET_DRIVERS=m
CONFIG_USB_NET_CDCETHER=m
CONFIG_USB_NET_CDC_NCM=m
CONFIG_USB_NET_RNDIS_HOST=m
CONFIG_USB_NET_CDC_EEM=m


# Ethernet
CONFIG_BCMGENET=y
CONFIG_MDIO_BCM_UNIMAC=y


# Hardware RNG
CONFIG_HW_RANDOM=y
CONFIG_HW_RANDOM_BCM2835=y

# Watchdog
CONFIG_BCM2835_WDT=y

# Power Reset
CONFIG_POWER_RESET=y
CONFIG_POWER_RESET_BCM2835=y

# Thermal
CONFIG_THERMAL=y
CONFIG_BCM2835_THERMAL=y

# Voltage/Power
CONFIG_REGULATOR=y
CONFIG_REGULATOR_FIXED_VOLTAGE=y
CONFIG_REGULATOR_GPIO=y

# RTC
CONFIG_RTC_CLASS=y
CONFIG_RTC_DRV_DS1307=m
CONFIG_RTC_DRV_PCF8563=m
CONFIG_RTC_DRV_RV3028=m
